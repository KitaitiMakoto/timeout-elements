<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Timeout Elements</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link href="stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="stylesheets/all.css" rel="stylesheet" type="text/css" />
    <link href="html/timeout-anchor.html" rel="import" />
    <script src="javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body class="index">
    <h1>Timeout Elements</h1>

<h2>Timeout Anchor</h2>

<p>This extends <code>a</code>(anchor) element as Timeout Anchor.</p>
<p>After you hover over Timeout Ancor element for several seconds(3 seconds by default), it will be clicked automatically.</p>
<p>Live demos follow.</p>

<h3>Basic Usage</h3>

<p>Add <code>is</code> attribute whose value is <code>timeout-anchor</code> to extend <code>a</code> element. Hover over the element and wait for 3 seconds and then you will visit link target(the same page in this example) without click.</p>

<pre class="code"><code class="html">&lt;!-- Declare as &quot;timeout-anchor&quot; --&gt;
&lt;a is=&quot;timeout-anchor&quot; href=&quot;.&quot;&gt;
  timeout anchor
&lt;&#x2F;a&gt;
</code></pre>
<div class="demo"><div><!-- Declare as "timeout-anchor" -->
<a is="timeout-anchor" href=".">
  timeout anchor
</a>
</div></div>


<h3>Specifying timeout duration</h3>

<p>You may specify timeout duration by <code>timeout</code> attribute.</p>

<pre class="code"><code class="html">&lt;a is=&quot;timeout-anchor&quot; href=&quot;.&quot; timeout=&quot;2&quot;&gt;timeout in 2 seconds&lt;&#x2F;a&gt;
</code></pre>
<div class="demo"><div><a is="timeout-anchor" href="." timeout="2">timeout in 2 seconds</a>
</div></div>


<h3>Native anchor attributes</h3>

<p>Timeout Anchor is an Anchor, so you can use attributes for native <code>a</code> like <code>href</code> and <code>target</code>.</p>

<pre class="code"><code class="html">&lt;a is=&quot;timeout-anchor&quot; href=&quot;.&quot; target=&quot;timing-anchor&quot;&gt;opening in timing-anchor window&lt;&#x2F;a&gt;
</code></pre>
<div class="demo"><div><a is="timeout-anchor" href="." target="timing-anchor">opening in timing-anchor window</a>
</div></div>


<h3>Horizontal bar indicator</h3>

<p>Indicator of timeout is gray arc spinner by default. You can use blue horizontal bar instead by setting <code>indicator</code> attribute to <code>horizontal-bar</code>. <code>indicator</code> for spinner is <code>spinner</code>.</p>

<pre class="code"><code class="html">&lt;!-- &quot;horizontal-bar&quot; indicator is also available --&gt;
&lt;a is=&quot;timeout-anchor&quot; href=&quot;.&quot;
   indicator=&quot;horizontal-bar&quot;&gt;
  horizontal bar indicator
&lt;&#x2F;a&gt;
</code></pre>
<div class="demo"><div><!-- "horizontal-bar" indicator is also available -->
<a is="timeout-anchor" href="."
   indicator="horizontal-bar">
  horizontal bar indicator
</a>
</div></div>


<h3>Custom indicator</h3>

<p>You can define and use your own indicator. Currently JavaScript is not supported. See comments in code below for more details.</p>

<pre class="code"><code class="html">&lt;template id=&quot;my-indicator&quot;&gt;
  &lt;style&gt;
    :host .indicator {
      position: absolute; &#x2F;* Highly recommended to set position to absolute *&#x2F;
      display: block;
      width: 6em;
      height: 1em;
    }
    :host .indicator[hidden] span {
      display: none;
    }
    :host .indicator span {
      width: 1em;
      height: 1em;
      color: green;
      opacity: 0;
    }
    :host .indicator span:nth-child(1) {
      -webkit-animation: reveal 3s infinite;
      animation: reveal 2s 0s infinite;
    }
    :host .indicator span:nth-child(2) {
      -webkit-animation: reveal 3s 1s infinite;
      animation: reveal 2s 2s infinite;
    }
    :host .indicator span:nth-child(3) {
      -webkit-animation: reveal 3s 2s infinite;
      animation: reveal 2s 4s infinite;
    }
    @-webkit-keyframes reveal {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes reveal {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
  &lt;&#x2F;style&gt;
  &lt;!-- Indicator requries &quot;indicator&quot; class and &quot;hidden&quot; attribute --&gt;
  &lt;p class=&quot;indicator&quot; hidden&gt;
    &lt;span&gt;&amp;#9679;&lt;&#x2F;span&gt;
    &lt;span&gt;&amp;#9679;&lt;&#x2F;span&gt;
    &lt;span&gt;&amp;#9679;&lt;&#x2F;span&gt;
  &lt;&#x2F;p&gt;
&lt;&#x2F;template&gt;

&lt;!-- Set CSS selector for your template
     because it is passed to document.querySelector() --&gt;
&lt;a is=&quot;timeout-anchor&quot; href=&quot;.&quot;
   indicator-template=&quot;#my-indicator&quot;
   timeout=&quot;12&quot;&gt;
  Custom indicator
&lt;&#x2F;a&gt;
</code></pre>
<div class="demo"><div><template id="my-indicator">
  <style>
    :host .indicator {
      position: absolute; /* Highly recommended to set position to absolute */
      display: block;
      width: 6em;
      height: 1em;
    }
    :host .indicator[hidden] span {
      display: none;
    }
    :host .indicator span {
      width: 1em;
      height: 1em;
      color: green;
      opacity: 0;
    }
    :host .indicator span:nth-child(1) {
      -webkit-animation: reveal 3s infinite;
      animation: reveal 2s 0s infinite;
    }
    :host .indicator span:nth-child(2) {
      -webkit-animation: reveal 3s 1s infinite;
      animation: reveal 2s 2s infinite;
    }
    :host .indicator span:nth-child(3) {
      -webkit-animation: reveal 3s 2s infinite;
      animation: reveal 2s 4s infinite;
    }
    @-webkit-keyframes reveal {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes reveal {
      0%   { opacity: 0; }
      50%  { opacity: 1; }
      100% { opacity: 0; }
    }
  </style>
  <!-- Indicator requries "indicator" class and "hidden" attribute -->
  <p class="indicator" hidden>
    <span>&#9679;</span>
    <span>&#9679;</span>
    <span>&#9679;</span>
  </p>
</template>

<!-- Set CSS selector for your template
     because it is passed to document.querySelector() -->
<a is="timeout-anchor" href="."
   indicator-template="#my-indicator"
   timeout="12">
  Custom indicator
</a>
</div></div>


<h3>Case <code>a</code> has CSS position</h3>

<p>In this case, indicator is not at expected position. Welcome advice!</p>

<h3>Attributes</h3>

<dl>
  <dt>Native attributes</dt>
  <dd><code>&lt;a&gt;</code>'s native attributes such as <code>href</code>, <code>title</code>, <code>target</code> etc. are all available.</dd>
  <dt><code>state</code></dt>
  <dd><code>waiting</code> or <code>counting</code>. <code>waiting</code> means mouse pointer is not on the link. <code>counting</code> means mouse pinter is on the link and clicked automatically in secondes specified by <code>timeout</code> attribute.</dd>
  <dt><code>timeout</code></dt>
  <dd>Time to the link will be clicked automatically in seconds. Integer or Float. Defaults to <code>3</code>.</dd>
  <dt><code>indicator</code></dt>
  <dd>Indicator which is shown when mouse pointer is on the link and <code>state</code> is <code>couting</code>. <code>spinner</code> and <code>horizontal-bar</code> is available currently. Defaults to <code>spinner</code>.</dd>
  <dt><code>indicator-template</code></dt>
  <dd>CSS selector which specifies your own custom indicator. Value of this attribute is passed to <code>document.querySelector()</code>, so it must be valid selector.</dd>
</dl>

<h3>Events</h3>

<p>Timeout Anchor fires two types of custom events.</p>

<dl>
  <dt><code>countdown</code></dt>
  <dd>Fired when mouse pointer becomes on the link and count down started.</dd>
  <dt><code>countdowncanceled</code></dt>
  <dd>Fired when mouse pointer becomes out of the link and count down stopped.</dd>
</dl>

<pre class="code"><code class="html">&lt;p&gt;Event(see console for event details): &lt;span id=&quot;event-result&quot;&gt;Not fired.&lt;&#x2F;span&gt;&lt;&#x2F;p&gt;
&lt;a is=&quot;timeout-anchor&quot; id=&quot;fire-events&quot; href=&quot;.&quot; timeout=&quot;12&quot;&gt;
  Timeout Anchor may fire &lt;code&gt;countdown&lt;&#x2F;code&gt; or &lt;code&gt;countdowncanceld&lt;&#x2F;code&gt; events.
&lt;&#x2F;a&gt;
&lt;script&gt;
    document.addEventListener(&quot;DOMContentLoaded&quot;, function() {
        var result = document.getElementById(&quot;event-result&quot;);
        var anchor = document.getElementById(&quot;fire-events&quot;);
        [&quot;countdown&quot;, &quot;countdowncanceled&quot;].forEach(function(eventName) {
            anchor.addEventListener(eventName, function(event) {
                result.textContent = eventName;
                console.info(eventName);
                console.dir(event);
            });
        });
    });
&lt;&#x2F;script&gt;
</code></pre>
<div class="demo"><div><p>Event(see console for event details): <span id="event-result">Not fired.</span></p>
<a is="timeout-anchor" id="fire-events" href="." timeout="12">
  Timeout Anchor may fire <code>countdown</code> or <code>countdowncanceld</code> events.
</a>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var result = document.getElementById("event-result");
        var anchor = document.getElementById("fire-events");
        ["countdown", "countdowncanceled"].forEach(function(eventName) {
            anchor.addEventListener(eventName, function(event) {
                result.textContent = eventName;
                console.info(eventName);
                console.dir(event);
            });
        });
    });
</script>
</div></div>


<h3>Installation</h3>

<p>Write this in your HTML. But note that this URI is not stable.</p>

<pre class="html"><code>&lt;link href="https://kitaitimakoto.github.io/timeout-elements/html/timeout-anchor.html" rel="import" /&gt;</code></pre>

<h3>Source code</h3>

<p>Visit the <a href="https://github.com/KitaitiMakoto/timeout-elements" is="timeout-anchor">repository</a> on GitHub.(This link is alsow Timeout Anchor, yay!)</p>

    <footer>
      <p xmlns:dct="http://purl.org/dc/terms/">
        <a rel="license"
           href="https://creativecommons.org/publicdomain/zero/1.0/">
          <img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0" />
        </a>
        <br />
        To the extent possible under law,
        <a rel="dct:publisher"
           href="https://github.com/KitaitiMakoto">
          <span property="dct:title">Kitaiti, Makoto</span></a>
        has waived all copyright and related or neighboring rights to
        <span property="dct:title">Timeout Elements</span>.
      </p>
    </footer>
  </body>
</html>
